<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinSecure - Financial Literacy & Cybersecurity</title>
    <link rel="stylesheet" href="../css/landing.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-shield-alt"></i>
                <span>FinSecure</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="#home" class="nav-link">Home</a>
                <a href="#features" class="nav-link">Features</a>
                <a href="#security" class="nav-link">Security</a>
                <a href="#contact" class="nav-link">Contact</a>
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
                
                <!-- Auth buttons - hidden when logged in -->
                <div id="auth-buttons">
                    <a href="/login" class="nav-link" id="login-link">Login</a>
                    <a href="/signup" class="cta-btn" id="signup-btn">Sign Up</a>
                </div>
                
                <!-- User menu - shown when logged in -->
                <div id="user-menu" style="display: none;">
                    <div class="user-profile">
                        <span id="user-name">John Doe</span>
                        <div class="user-dropdown">
                            <a href="/dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                            <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-background"></div>
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    Master Your <span class="gradient-text">Financial Future</span>
                    <br>With Complete <span class="gradient-text">Security</span>
                </h1>
                <p class="hero-description">
                    Learn financial literacy while keeping your digital assets safe. 
                    Our platform combines cutting-edge cybersecurity with comprehensive 
                    financial education to empower your journey to financial freedom.
                </p>
                <div class="hero-buttons">
                    <button class="btn-primary" id="start-learning">
                        <i class="fas fa-rocket"></i>
                        <span id="start-btn-text">Start Learning</span>
                    </button>
                    <button class="btn-secondary" id="learn-more">
                        <i class="fas fa-play"></i>
                        Watch Demo
                    </button>
                </div>
            </div>
            <div class="hero-visual">
                <div class="floating-card card-1">
                    <i class="fas fa-chart-line"></i>
                    <span>Investment Growth</span>
                </div>
                <div class="floating-card card-2">
                    <i class="fas fa-lock"></i>
                    <span>Bank-level Security</span>
                </div>
                <div class="floating-card card-3">
                    <i class="fas fa-graduation-cap"></i>
                    <span>Expert Education</span>
                </div>
                <div class="hero-dashboard">
                    <div class="dashboard-header">
                        <div class="dashboard-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <span>Financial Dashboard</span>
                    </div>
                    <div class="dashboard-content">
                        <div class="metric">
                            <span class="metric-label">Portfolio Value</span>
                            <span class="metric-value">R24,573</span>
                        </div>
                        <div class="chart-container">
                            <div class="chart-bar" style="height: 60%"></div>
                            <div class="chart-bar" style="height: 80%"></div>
                            <div class="chart-bar" style="height: 45%"></div>
                            <div class="chart-bar" style="height: 90%"></div>
                            <div class="chart-bar" style="height: 70%"></div>
                        </div>
                        <div class="security-badge">
                            <i class="fas fa-shield-check"></i>
                            <span>Secured</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="scroll-indicator">
            <div class="scroll-arrow"></div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="features">
        <div class="container">
            <div class="section-header">
                <h2>Comprehensive Financial & Security Education</h2>
                <p>Everything you need to build wealth while staying protected</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <h3>Financial Fundamentals</h3>
                    <p>Master budgeting, saving, investing, and wealth-building strategies with interactive lessons and real-world scenarios.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h3>Cybersecurity Training</h3>
                    <p>Learn to protect your financial data from cyber threats with hands-on security exercises and best practices.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>Investment Analytics</h3>
                    <p>Analyze market trends and make informed decisions with our advanced portfolio tracking and risk assessment tools.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Secure Mobile Access</h3>
                    <p>Access your learning materials and financial tools securely from anywhere with our encrypted mobile platform.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Security Section -->
    <section id="security" class="security">
        <div class="container">
            <div class="security-content">
                <div class="security-visual">
                    <div class="security-shield">
                        <i class="fas fa-shield-alt"></i>
                        <div class="security-rings">
                            <div class="ring ring-1"></div>
                            <div class="ring ring-2"></div>
                            <div class="ring ring-3"></div>
                        </div>
                    </div>
                </div>
                <div class="security-info">
                    <h2>Enterprise-Grade Security</h2>
                    <p>Your financial data and learning progress are protected by military-grade encryption and advanced security protocols.</p>
                    <div class="security-features">
                        <div class="security-item">
                            <i class="fas fa-key"></i>
                            <div>
                                <h4>256-bit Encryption</h4>
                                <p>All data encrypted with bank-level security standards</p>
                            </div>
                        </div>
                        <div class="security-item">
                            <i class="fas fa-fingerprint"></i>
                            <div>
                                <h4>Multi-Factor Authentication</h4>
                                <p>Biometric and token-based security layers</p>
                            </div>
                        </div>
                        <div class="security-item">
                            <i class="fas fa-server"></i>
                            <div>
                                <h4>Secure Cloud Infrastructure</h4>
                                <p>Distributed architecture with redundant backups</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2>Ready to Transform Your Financial Future?</h2>
                <p>Join thousands of learners who are building wealth while staying secure</p>
                <button class="btn-primary large" id="join-now">
                    <i class="fas fa-arrow-right"></i>
                    <span id="cta-text">Join FinSecure Today</span>
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-shield-alt"></i>
                    <span>FinSecure</span>
                </div>
                <div class="footer-links">
                    <a href="#privacy">Privacy Policy</a>
                    <a href="#terms">Terms of Service</a>
                    <a href="#support">Support</a>
                </div>
                <div class="footer-social">
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                    <a href="#"><i class="fab fa-github"></i></a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FinSecure. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <style>
        /* Additional styles for user authentication */
        .user-profile {
            position: relative;
            cursor: pointer;
            color: #22c55e;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }

        .user-profile:hover {
            background: rgba(34, 197, 94, 0.1);
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 8px;
            padding: 0.5rem;
            min-width: 150px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .user-profile:hover .user-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            color: #e2e8f0;
            text-decoration: none;
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }

        .user-dropdown a:hover {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }

        /* Mobile responsive for user menu */
        @media (max-width: 768px) {
            .user-dropdown {
                right: -1rem;
            }
        }
    </style>

    <script>
        // Check if user is logged in on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            
            // Hamburger menu functionality
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('nav-menu');
            
            hamburger.addEventListener('click', function() {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            // Button click handlers
            document.getElementById('start-learning').addEventListener('click', function() {
                const user = JSON.parse(localStorage.getItem('finSecureUser') || '{}');
                if (user.token) {
                    window.location.href = '/dashboard';
                } else {
                    window.location.href = '/signup';
                }
            });

            document.getElementById('join-now').addEventListener('click', function() {
                const user = JSON.parse(localStorage.getItem('finSecureUser') || '{}');
                if (user.token) {
                    window.location.href = '/dashboard';
                } else {
                    window.location.href = '/signup';
                }
            });

            document.getElementById('learn-more').addEventListener('click', function() {
                // Scroll to features section
                document.getElementById('features').scrollIntoView({ behavior: 'smooth' });
            });
        });

        function checkAuthStatus() {
            const userData = localStorage.getItem('finSecureUser');
            const authButtons = document.getElementById('auth-buttons');
            const userMenu = document.getElementById('user-menu');
            const userNameSpan = document.getElementById('user-name');
            const startBtnText = document.getElementById('start-btn-text');
            const ctaText = document.getElementById('cta-text');

            if (userData) {
                const user = JSON.parse(userData);
                
                // Hide auth buttons, show user menu
                authButtons.style.display = 'none';
                userMenu.style.display = 'block';
                
                // Update user name
                userNameSpan.textContent = `${user.firstName} ${user.lastName}`;
                
                // Update button texts for logged-in users
                startBtnText.textContent = 'Go to Dashboard';
                ctaText.textContent = 'Continue Learning';
                
                // Verify token is still valid (optional)
                verifyToken(user.token);
            } else {
                // Show auth buttons, hide user menu
                authButtons.style.display = 'flex';
                userMenu.style.display = 'none';
                
                // Reset button texts
                startBtnText.textContent = 'Start Learning';
                ctaText.textContent = 'Join FinSecure Today';
            }
        }

        async function verifyToken(token) {
            try {
                const response = await fetch('/api/auth/profile', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (!response.ok) {
                    // Token is invalid, clear storage and reset UI
                    logout();
                }
            } catch (error) {
                console.error('Token verification failed:', error);
                // Don't logout on network errors, only on auth failures
            }
        }

        function logout() {
            // Clear user data
            localStorage.removeItem('finSecureUser');
            
            // Reset UI
            checkAuthStatus();
            
            // Optional: Call server logout endpoint
            fetch('/api/auth/logout', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${JSON.parse(localStorage.getItem('finSecureUser') || '{}').token}`
                }
            }).catch(() => {
                // Ignore errors for logout
            });
            
            // Redirect to home
            window.location.href = '/';
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</body>
</html>